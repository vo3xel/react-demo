(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[0],{101:function(e,t,n){},106:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),o=n.n(c);n(94),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(9),u=function(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}},l=function(e){return console.log("FAKE BACKEND: [".concat(e,"]"))},s=[{id:1,userName:"vo3xel",password:"123456",email:"vo3xel@gmail.com",firstName:"Michael",lastName:"Spitzer"}],m=n(22),E=n.n(m),f=function(e,t){return fetch("".concat(E.a.get("apiUrl"),"/auth"),O.postRequest(JSON.stringify({userName:e,password:t}))).then(h).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},d=function(){return localStorage.removeItem("user")},g={getUserDetails:function(e){return fetch("".concat(E.a.get("apiUrl"),"/user/").concat(e),O.getRequest).then(h)}},h=function(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&g.logout();var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))},p=n(87),S=Object(p.a)(),b=n(27),O={getRequest:{method:"GET",headers:u()},postRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{method:"POST",headers:Object(b.a)({},u(),{},{"Content-Type":"application/json"}),body:e}}},T=n(25),v="ALERT_SUCCESS",_="ALERT_ERROR",I="ALERT_CLEAR",y="LOGIN_REQUEST",U="LOGIN_SUCCESS",k="LOGIN_FAILURE",N="LOGOUT",R={GET_USER_DETAILS_REQUEST:"GET_USER_DETAILS_REQUEST",GET_USER_DETAILS_SUCCESS:"GET_USER_DETAILS_SUCCESS",GET_USER_DETAILS_FAILURE:"GET_USER_DETAILS_FAILURE"},j="SET_BOX_SCALE",A=JSON.parse(localStorage.getItem("user")),L=A?{loggedIn:!0,user:A}:{},w={boxScale:1},x=Object(T.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{type:"alert-success",message:t.message};case _:return{type:"alert-danger",message:t.message};case I:return{};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loggingIn:!0};case U:return{loggedIn:!0,userId:t.user.id};case k:return{};default:return e}},three:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{boxScale:t.scale};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.GET_USER_DETAILS_REQUEST:return Object(b.a)({},e,{loading:!0});case R.GET_USER_DETAILS_SUCCESS:return Object(b.a)({},e,{user:t.user,loading:!1});case R.GET_USER_DETAILS_FAILURE:return Object(b.a)({},e,{error:t.error,loading:!1});case R.SET_USER_ID:return Object(b.a)({},e,{userId:t.userId,loading:!1});default:return e}}}),C=n(71),G=n(72),D=Object(G.createLogger)(),J=Object(T.d)((function(e,t){return t.type===N&&(e=void 0),x(e,t)}),Object(T.a)(C.a,D)),B=n(42),z=n(73),Q=n.n(z),F=(n(101),function(e,t){return function(n){n({type:y,user:{username:e}}),f(e,t).then((function(e){n(function(e){return{type:U,user:e}}(e)),S.push("/")}),(function(e){n(function(e){return{type:k,error:e}}(e)),n(W.error(e))}))}}),P=function(){return d(),{type:N}},W={success:function(e){return{type:v,message:e}},error:function(e){return{type:_,message:e}},clear:function(){return{type:I}}},q=function(e){return function(t){t(function(e){return{type:R.GET_USER_DETAILS_REQUEST,userId:e}}(e)),g.getUserDetails(e).then((function(e){t(function(e){return{type:R.GET_USER_DETAILS_SUCCESS,user:e}}(e)),S.push("/")}),(function(e){t(function(e){return{type:R.GET_USER_DETAILS_FAILURE,error:e}}(e)),t(W.error(e))}))}},M=function(e){return{type:j,scale:e}},X=n(32),K=n(35),V=n(37),H=n(58),Y=n(86),Z=n(43),$=n(77),ee=n(18),te=n(20);function ne(){var e=Object(B.a)(["\n  display: block;\n  font-size: 20px;\n  margin-left: 15px;\n  margin-right: 15px;\n"]);return ne=function(){return e},e}var re=Z.a.div(ne()),ae=function(){var e,t=Object(i.c)((function(e){return e.user})).user,n=Object(i.c)((function(e){return e.auth})).userId,c=Object(i.b)();return Object(r.useEffect)((function(){c(q(n))}),[n,c]),a.a.createElement(K.a,null,a.a.createElement(V.a,{lg:6},a.a.createElement(te.a,null,a.a.createElement(te.a.Body,null,a.a.createElement(te.a.Title,null,"Authenticated user action: get user details"),a.a.createElement(te.a.Text,null,"This action returns detailed information about the logged in user."),t&&a.a.createElement(Y.a,{trigger:"click",placement:"right",overlay:(e=t,a.a.createElement(H.a,{id:"popover-basic"},a.a.createElement(H.a.Title,{as:"h2"},"User details"),a.a.createElement(H.a.Content,null,a.a.createElement(re,null,a.a.createElement("strong",null,"id: ")," ",e.id," ",a.a.createElement("br",null),a.a.createElement("strong",null,"userName: ")," ",e.userName," ",a.a.createElement("br",null),a.a.createElement("strong",null,"password: ")," ",e.password," ",a.a.createElement("br",null),a.a.createElement("strong",null,"email: ")," ",e.email," ",a.a.createElement("br",null),a.a.createElement("strong",null,"firstName: ")," ",e.firstName," ",a.a.createElement("br",null),a.a.createElement("strong",null,"lastName: ")," ",e.lastName," ",a.a.createElement("br",null)))))},a.a.createElement(X.a,null,"Get details of user"))))),a.a.createElement(V.a,{lg:6},a.a.createElement(te.a,null,a.a.createElement(te.a.Body,null,a.a.createElement(te.a.Title,null,"Authenticated user action: set threejs scene box size"),a.a.createElement(te.a.Text,null,"This action sets the box size in the threejs scene."),t&&a.a.createElement($.a,{id:"dropdown-basic-button",title:"Box size"},a.a.createElement(ee.a.Item,{onClick:function(){return c(M(1))}},"1"),a.a.createElement(ee.a.Item,{onClick:function(){return c(M(1.5))}},"1.5"),a.a.createElement(ee.a.Item,{onClick:function(){return c(M(2))}},"2"),a.a.createElement(ee.a.Item,{onClick:function(){return c(M(2.5))}},"2.5"))))))},ce=n(7),oe=n(56),ie=function(e){var t=Object(r.useState)(!1),n=Object(ce.a)(t,2),c=n[0],o=n[1],u=Object(r.useState)(!1),l=Object(ce.a)(u,2),s=l[0],m=l[1],E=Object(i.c)((function(e){return e.three})).boxScale,f=Object(r.useRef)();return Object(oe.b)((function(){return f.current.rotation.x=f.current.rotation.y+=.01})),a.a.createElement("mesh",Object.assign({},e,{ref:f,scale:s?[1.5*E,1.5*E,1.5*E]:[1*E,1*E,1*E],onClick:function(e){return m(!s)},onPointerOver:function(e){return o(!0)},onPointerOut:function(e){return o(!1)}}),a.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),a.a.createElement("meshStandardMaterial",{attach:"material",color:c?"hotpink":"orange"}))},ue=function(){var e=Object(i.d)();return a.a.createElement(oe.a,{style:{height:"40vmin"}},a.a.createElement(i.a,{store:e},a.a.createElement("ambientLight",null),a.a.createElement("pointLight",{position:[10,10,10]}),a.a.createElement(ie,{position:[-4,0,0]}),a.a.createElement(ie,{position:[4,0,0]})))},le=n(82);function se(){var e=Object(B.a)(["\n  display: block;\n  text-align: center;\n  font-size: 30px;\n  margin-left: 15px;\n  margin-right: 15px;\n"]);return se=function(){return e},e}var me=Z.a.div(se()),Ee=n(83),fe=n(55),de=(n(106),n(65)),ge=n(85),he=n(84),pe=(n(108),document.getElementById("root"));E.a.set({apiUrl:"http://fake-backend:5000",configureFakeBackend:!0}),E.a.get("configureFakeBackend")&&(console.warn("WARNING: fake backend activated with dev config !!!"),console.log("fake backend URL: ".concat(E.a.get("apiUrl"))),function(){var e=window.fetch;window.fetch=function(t,n){return new Promise((function(r,a){setTimeout((function(){if(t.endsWith("/auth")&&"POST"===n.method){l(t);var c=JSON.parse(n.body),o=s.filter((function(e){return e.userName===c.userName&&e.password===c.password}));if(o.length){var i=o[0],u={id:i.id,userName:i.userName,firstName:i.firstName,lastName:i.lastName,token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NzkzNTQ4ODMsImlhdCI6MTU3OTI2ODQ3OCwic3ViIjoyfQ.oCY-MSL9c9GSvt2Osf7Q-Z9XRA_OhgXjP_kETdwFps4"};r({ok:!0,text:function(){return Promise.resolve(JSON.stringify(u))}})}else a("Username or password is incorrect")}else{if(t.endsWith("/user/1")&&"GET"===n.method)return l(t),void r({ok:!0,text:function(){return Promise.resolve(JSON.stringify(s[0]))}});l(t+" - request NOT handled by fake-backend => passed through"),e(t,n).then((function(e){return r(e)}))}}),500)}))}}()),o.a.render(a.a.createElement(i.a,{store:J},a.a.createElement((function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).userId;return a.a.createElement(de.a,{expand:"lg",variant:"dark",bg:"dark"},a.a.createElement(de.a.Brand,null,"React-demo"),a.a.createElement(ge.a,{className:"mr-auto"}),a.a.createElement(he.a,{inline:!0},a.a.createElement(X.a,{onClick:function(){return e(t?P():F("vo3xel","123456"))}},a.a.createElement(Ee.a,{icon:t?fe.b:fe.a})," ",t?"logout":"login")))}),null),a.a.createElement((function(){var e=Object(i.c)((function(e){return e.auth})).userId;return a.a.createElement(le.a,{fluid:!0},!e&&a.a.createElement(K.a,{className:"justify-content-center"},a.a.createElement("img",{src:Q.a,className:"App-logo",alt:"logo"})),e&&a.a.createElement(K.a,null,a.a.createElement(ue,null)),a.a.createElement(K.a,{className:"mb-3"},a.a.createElement(me,null,"A dockerized state-of-the-art react application with react 16, JWT token, redux, fake-backend, styled components and react testing library")),e&&a.a.createElement(ae,null))}),null)),pe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},90:function(e,t,n){e.exports=n(109)},94:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.9246ef70.chunk.js.map